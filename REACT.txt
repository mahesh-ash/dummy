Here is your exact same code with NO COMMENTS, NO EXTRA TEXT, NO EXTRA LOGIC.
Just a clean one-file component exactly as you asked.


---

✅ CLEAN VERSION (NO COMMENTS)

import React, { useState, useEffect } from "react";
import DatePicker from "react-datepicker";
import { AiOutlineClose } from "react-icons/ai";
import { useToast } from "@/hooks/use-toast";
import { createAuthHeaders, API_CONFIG } from "@/lib/legacyUtils";

interface TaskForm {
  taskId?: string;
  assignedTo: string;
  taskType: string;
  status: string;
  subject: string;
  contacts: string;
  description: string;
  dueDate: Date | null;
  time: string;
}

interface User {
  USER_ID: string;
  reassign_name: string;
  role_name: string;
}

interface Task {
  task_id: string;
  assigned_to: string;
  task_type: string;
  status: string;
  subject: string;
  contacts: string;
  description: string;
  due_date: string;
  time: string;
}

const AddTaskModal: React.FC = () => {
  const { toast } = useToast();

  const [open, setOpen] = useState(false);
  const [editMode, setEditMode] = useState(false);
  const [taskId, setTaskId] = useState("");

  const [users, setUsers] = useState<User[]>([]);
  const [loadingUsers, setLoadingUsers] = useState(false);

  const [tasks, setTasks] = useState<Task[]>([]);

  const [form, setForm] = useState<TaskForm>({
    assignedTo: "",
    taskType: "",
    status: "",
    subject: "",
    contacts: "",
    description: "",
    dueDate: new Date(),
    time: "10:00",
  });

  const getTasks = async () => {
    try {
      const res = await fetch(`${API_CONFIG.fullUrl}/task/getTasks`, {
        method: "GET",
        headers: createAuthHeaders(),
      });
      const data = await res.json();
      if (data.status === 1) {
        setTasks(data.data);
      }
    } catch (err) {
      toast({ title: "Error", description: "Failed to fetch tasks" });
    }
  };

  useEffect(() => {
    getTasks();
  }, []);

  const fetchUsers = async (query: string) => {
    if (query.length < 2) return;
    setLoadingUsers(true);
    try {
      const res = await fetch(`${API_CONFIG.fullUrl}/task/searchReAssign`, {
        method: "POST",
        headers: {
          ...createAuthHeaders(),
          "Content-Type": "application/json",
        },
        body: JSON.stringify({ Name: query }),
      });
      const data = await res.json();
      if (data?.data) setUsers(data.data);
    } catch (err) {
      setUsers([]);
    } finally {
      setLoadingUsers(false);
    }
  };

  const handleChange = (
    e: React.ChangeEvent<HTMLInputElement | HTMLTextAreaElement | HTMLSelectElement>
  ) => {
    setForm({ ...form, [e.target.name]: e.target.value });
  };

  const handleAdd = async () => {
    try {
      const res = await fetch(`${API_CONFIG.fullUrl}/task/addTask`, {
        method: "POST",
        headers: { ...createAuthHeaders(), "Content-Type": "application/json" },
        body: JSON.stringify(form),
      });
      const data = await res.json();
      if (data.status === 1) {
        toast({ title: "Success", description: "Task Added Successfully" });
        setOpen(false);
        getTasks();
      } else {
        toast({ title: "Error", description: data.message });
      }
    } catch (err) {
      toast({ title: "Error", description: "Failed to add task" });
    }
  };

  const handleUpdate = async () => {
    try {
      const payload = { ...form, taskId };
      const res = await fetch(`${API_CONFIG.fullUrl}/task/updateTask`, {
        method: "POST",
        headers: { ...createAuthHeaders(), "Content-Type": "application/json" },
        body: JSON.stringify(payload),
      });
      const data = await res.json();
      if (data.status === 1) {
        toast({ title: "Updated", description: "Task Updated Successfully" });
        setOpen(false);
        setEditMode(false);
        getTasks();
      } else {
        toast({ title: "Error", description: data.message });
      }
    } catch (err) {
      toast({ title: "Error", description: "Update failed" });
    }
  };

  const deleteTask = async (id: string) => {
    try {
      const payload = {
        deleteJson: JSON.stringify({ rowId: id, type: "Task" }),
      };
      const res = await fetch(`${API_CONFIG.fullUrl}/activities/commonDelete`, {
        method: "POST",
        headers: { ...createAuthHeaders(), "Content-Type": "application/json" },
        body: JSON.stringify(payload),
      });
      const data = await res.json();
      if (data.status === 1) {
        toast({ title: "Deleted", description: "Task Deleted Successfully" });
        getTasks();
      }
    } catch (err) {
      toast({ title: "Error", description: "Delete failed" });
    }
  };

  const openEdit = (task: Task) => {
    setTaskId(task.task_id);
    setForm({
      assignedTo: task.assigned_to,
      taskType: task.task_type,
      status: task.status,
      subject: task.subject,
      contacts: task.contacts,
      description: task.description,
      dueDate: new Date(task.due_date),
      time: task.time,
    });
    setEditMode(true);
    setOpen(true);
  };

  return (
    <div className="p-5">
      <button
        onClick={() => {
          setEditMode(false);
          setOpen(true);
        }}
        className="px-4 py-2 bg-blue-600 text-white rounded"
      >
        Add Task
      </button>

      <h2 className="text-xl font-semibold mt-5 mb-3">Task List</h2>

      {tasks.length === 0 ? (
        <p>No tasks found</p>
      ) : (
        <ul className="space-y-3">
          {tasks.map((t) => (
            <li key={t.task_id} className="border p-3 rounded shadow-sm bg-gray-50">
              <h3 className="font-bold">{t.subject}</h3>
              <p>{t.description}</p>
              <p className="text-sm text-gray-600">
                Due: {t.due_date} | Time: {t.time}
              </p>

              <div className="flex gap-3 mt-2">
                <button
                  className="px-3 py-1 bg-yellow-600 text-white rounded"
                  onClick={() => openEdit(t)}
                >
                  Edit
                </button>

                <button
                  className="px-3 py-1 bg-red-600 text-white rounded"
                  onClick={() => deleteTask(t.task_id)}
                >
                  Delete
                </button>
              </div>
            </li>
          ))}
        </ul>
      )}

      {open && (
        <div className="fixed inset-0 bg-black bg-opacity-40 flex justify-center items-center">
          <div className="bg-white w-[500px] p-5 rounded-lg relative">
            <button className="absolute top-2 right-2" onClick={() => setOpen(false)}>
              <AiOutlineClose size={20} />
            </button>

            <h2 className="text-xl font-semibold mb-4">
              {editMode ? "Update Task" : "Add Task"}
            </h2>

            <label>Assign To</label>
            <input
              type="text"
              name="assignedTo"
              value={form.assignedTo}
              onChange={(e) => {
                handleChange(e);
                fetchUsers(e.target.value);
              }}
              className="w-full border p-2 mb-2 rounded"
              placeholder="Type to search..."
            />

            {loadingUsers && <p>Loading...</p>}

            {users.length > 0 && (
              <ul className="border max-h-32 overflow-y-auto mb-3">
                {users.map((u) => (
                  <li
                    key={u.USER_ID}
                    className="p-2 hover:bg-gray-100 cursor-pointer"
                    onClick={() => setForm({ ...form, assignedTo: u.USER_ID })}
                  >
                    {u.reassign_name} - {u.role_name}
                  </li>
                ))}
              </ul>
            )}

            <label>Due Date</label>
            <DatePicker
              selected={form.dueDate}
              onChange={(date) => setForm({ ...form, dueDate: date })}
              className="w-full border p-2 mb-3 rounded"
            />

            <label>Time</label>
            <input
              type="time"
              value={form.time}
              onChange={(e) => setForm({ ...form, time: e.target.value })}
              className="w-full border p-2 mb-3 rounded"
            />

            <label>Task Type</label>
            <select
              name="taskType"
              value={form.taskType}
              onChange={handleChange}
              className="w-full border p-2 mb-3 rounded"
            >
              <option value="">-- Select --</option>
              <option value="action-items">Action Items</option>
              <option value="call-back">Call Back</option>
              <option value="others">Others</option>
              <option value="schedule-meeting">Schedule Meeting</option>
              <option value="send-email">Send Email</option>
            </select>

            <label>Status</label>
            <select
              name="status"
              value={form.status}
              onChange={handleChange}
              className="w-full border p-2 mb-3 rounded"
            >
              <option value="">-- Select --</option>
              <option value="not-started">Not Started</option>
              <option value="completed">Completed</option>
              <option value="incomplete">Incomplete</option>
            </select>

            <label>Subject</label>
            <input
              type="text"
              name="subject"
              value={form.subject}
              onChange={handleChange}
              className="w-full border p-2 mb-3 rounded"
            />

            <label>Contacts</label>
            <input
              type="text"
              name="contacts"
              value={form.contacts}
              onChange={handleChange}
              className="w-full border p-2 mb-3 rounded"
            />

            <label>Description</label>
            <textarea
              name="description"
              value={form.description}
              onChange={handleChange}
              className="w-full border p-2 mb-3 rounded"
              rows={3}
            />

            <button
              onClick={editMode ? handleUpdate : handleAdd}
              className="w-full bg-green-600 text-white py-2 rounded"
            >
              {editMode ? "Update Task" : "Save Task"}
            </button>
          </div>
        </div>
      )}
    </div>
  );
};

export default AddTaskModal;


---

If you want:
✅ Tailwind UI improved version
✅ Dropdown search for Assign To
✅ Modal animation
Just tell me — I will upgrade it.
                                    
        

